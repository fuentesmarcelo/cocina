<%- include('partials/header') -%>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= post.title %></title>
</head>
<body>
  <h1><%= post.title %></h1>
  
  <!-- Display Ingredients as a Bullet-Point List -->
  <h3>Ingredients:</h3>
  <ul>
    <% const ingredients = post.ingredients.split("\n"); %> <!-- Assumes ingredients are stored with line breaks -->
    <% ingredients.forEach(ingredient => { %>
      <li><%= ingredient.trim() %></li>
    <% }) %>
  </ul>

  <!-- Display Directions as an Ordered List -->
  <h3>Directions:</h3>
  <ol>
    <% const directions = post.directions.split("\n"); %> <!-- Assumes directions are stored with line breaks -->
    <% directions.forEach(direction => { %>
      <li><%= direction.trim() %></li>
    <% }) %>
  </ol>

  <p>Created by: <%= post.user.userName %></p>
  <img src="<%= post.imagePath %>" alt="<%= post.title %>" style="width: 100%; max-width: 400px;">
  <p>Likes: <%= post.likes %></p>
  <p>Created by: <%= post.user.userName %></p>
  
  <form action="/post/likePost/<%= post._id %>" method="POST">
    <button type="submit">Like</button>
  </form>

  <!-- Edit Recipe Button -->
  <a href="/post/edit/<%= post._id %>">
    <button>Edit Recipe</button>
  </a>

  <!-- Delete Post Form -->
  <form action="/post/deletePost/<%= post._id %>" method="POST" style="margin-top: 20px;">
    <button type="submit" onclick="return confirm('Are you sure you want to delete this post?')">Delete Post</button>
  </form>
</body>
</html>

<%- include('partials/footer') -%>
